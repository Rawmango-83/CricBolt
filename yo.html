<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta http-equiv="Content-Security-Policy" content="default-src 'self' https://cdnjs.cloudflare.com https://www.gstatic.com https://www.googleapis.com https://identitytoolkit.googleapis.com https://securetoken.googleapis.com https://firestore.googleapis.com; script-src 'self' 'unsafe-inline' https://cdnjs.cloudflare.com https://www.gstatic.com https://apis.google.com; style-src 'self' 'unsafe-inline' https://fonts.googleapis.com; font-src 'self' https://fonts.gstatic.com; img-src 'self' data: https:; connect-src 'self' https:; frame-src 'self' https://accounts.google.com https://apis.google.com https://*.firebaseapp.com;">
  <title>Hand Cricket - Tournament Edition</title>
  
  <!-- External Libraries -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-firestore-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.7.1/firebase-functions-compat.js"></script>
  
  <!-- Your Styles -->
  <link rel="stylesheet" href="cssHC.css">
  <link href="https://fonts.googleapis.com/css2?family=Cinzel:wght@600;700;800&family=Manrope:wght@400;500;700;800&display=swap" rel="stylesheet">
</head>
<body>

<!-- Fixed Global Buttons -->
<button id="menuToggleBtn" onclick="toggleSideMenu()" title="Open Menu">â˜° Menu</button>
<button id="globalHomeBtn" onclick="returnToHome()">ğŸ  Home</button>
<div id="ambientBgmBadge">BGM ON</div>

<div id="sideMenuBackdrop" onclick="closeSideMenu()"></div>
<aside id="sideMenuDrawer" aria-label="Main menu">
  <div class="side-menu-header">
    <strong>Game Menu</strong>
    <button type="button" onclick="closeSideMenu()">?</button>
  </div>
  <button class="side-menu-item" onclick="openMenuHistory()">ğŸ“œ History</button>
  <button class="side-menu-item" onclick="openMenuCareer()">ğŸ“ˆ Career Stats</button>
  <button class="side-menu-item" onclick="openMenuLeaderboard()">ğŸ† Leaderboard</button>
  <button class="side-menu-item" onclick="openMenuRanked()">ğŸ¯ Ranked Multiplayer</button>
    <button class="side-menu-item" onclick="openMenuFriends()">ğŸ‘¥ Friends</button>
<button class="side-menu-item" onclick="openMenuClan()">ğŸ›¡ï¸ Clan Hub</button>
  <button class="side-menu-item" id="menuResumeBtn" onclick="openMenuResume()" style="display:none">â–¶ Resume Tournament</button>
</aside>

<!-- Toss Overlay -->
<div id="tossOverlay">
  <div id="tossBox">
    <span id="tossIcon">ğŸª™</span>
    <div id="tossTitle">Toss Time!</div>
    <div id="tossMsg"></div>
    <div id="tossSubMsg"></div>
    <div class="toss-choice-row" id="tossChoiceRow"></div>
  </div>
</div>

<!-- History Modal -->
<div class="hmodal-bg" id="historyModal">
  <div class="hmodal-box">
    <button class="hmodal-close" onclick="closeHistoryModal()">âœ• Close</button>
    <h2 style="color:#667eea;margin-bottom:20px">ğŸ“š Match &amp; Tournament History</h2>
    <div style="margin-bottom:20px;display:flex;flex-wrap:wrap;gap:8px">
      <button class="htab-btn active" id="htab-all" onclick="showHistoryTab('all')">ğŸ“‹ All Matches</button>
      <button class="htab-btn" id="htab-tournaments" onclick="showHistoryTab('tournaments')">ğŸ† Tournaments</button>
      <button class="htab-btn" id="htab-stats" onclick="showHistoryTab('stats')">ğŸ“ˆ Career Stats</button>
      <button class="htab-btn" id="htab-leaderboard" onclick="showHistoryTab('leaderboard')">ğŸ† Leaderboard</button>
      <button class="htab-btn" id="htab-hof" onclick="showHistoryTab('hof')">ğŸŒŸ Hall of Fame</button>
      <button class="htab-btn" onclick="clearAllHistoryData()" style="background:#ef4444">ğŸ§¹ Clear All</button>
    </div>
    <div id="historyTabContent"></div>
  </div>
</div>

<!-- Resume Tournament Modal -->
<div class="rmodal-bg" id="resumeModal">
  <div class="rmodal-box">
    <h2 style="color:#667eea;margin-bottom:10px">â–¶ Resume Tournament</h2>
    <p style="color:#718096;margin-bottom:20px">Select a saved tournament to continue:</p>
    <div id="resumeList"></div>
    <button onclick="closeResumeModal()" style="margin-top:20px;background:#718096">Cancel</button>
  </div>
</div>

<!-- Ranked Multiplayer Modal -->
<div class="rmodal-bg" id="rankedModal">
  <div class="rmodal-box">
    <h2 style="color:#667eea;margin-bottom:10px">Ranked Multiplayer</h2>
        <p style="color:#718096;margin-bottom:12px">Entry cost: <strong>1 Match Token</strong></p>
    <div style="margin-bottom:12px;text-align:left">
      <label for="rankedOversSelect" style="display:block;color:#4a5568;font-size:13px;margin-bottom:6px">Select Overs</label>
      <select id="rankedOversSelect" style="max-width:220px">
        <option value="2">2 Overs</option>
        <option value="4" selected>4 Overs</option>
        <option value="6">6 Overs</option>
        <option value="8">8 Overs</option>
        <option value="10">10 Overs</option>
      </select>
    </div>
    <p id="rankedStatus" style="color:#4a5568;margin-bottom:20px">Press "Find Match" to start matchmaking.</p>
    <button id="rankedReadyBtn" onclick="rankedMarkReady()" style="width:auto;background:#48bb78;display:none;margin-bottom:12px">Ready</button>
    <div id="rankedLivePanel" style="display:none;margin-bottom:14px;padding:14px;border-radius:14px;background:linear-gradient(135deg,#eef2ff,#f8fafc);border:1px solid #c7d2fe;box-shadow:0 8px 18px rgba(99,102,241,.12);text-align:left">
      <div id="rankedScoreboard" style="font-weight:700;color:#2d3748;margin-bottom:8px">Scoreboard</div>
      <div id="rankedTurnInfo" style="color:#4a5568;font-size:14px">Waiting for room to start...</div>
    </div>
    <div id="rankedNumberRow" class="number-buttons" style="display:none;margin:10px 0 16px 0">
      <button onclick="rankedPlayNumber(0)">0</button>
      <button onclick="rankedPlayNumber(1)">1</button>
      <button onclick="rankedPlayNumber(2)">2</button>
      <button onclick="rankedPlayNumber(3)">3</button>
      <button onclick="rankedPlayNumber(4)">4</button>
      <button onclick="rankedPlayNumber(5)">5</button>
      <button onclick="rankedPlayNumber(6)">6</button>
    </div>
    <div style="display:flex;gap:10px;justify-content:center;flex-wrap:wrap">
      <button id="rankedFindBtn" onclick="startRankedQueue()" style="width:auto;background:linear-gradient(135deg,#667eea,#764ba2)">Find Match</button>
      <button id="rankedCancelBtn" onclick="cancelRankedQueue()" style="width:auto;background:#f59e0b;display:none">Cancel Queue</button>
      <button id="rankedCloseBtn" onclick="closeRankedModal()" style="width:auto;background:#718096">Close</button>
    </div>
  </div>
</div>

<!-- Clan Modal -->
<div class="rmodal-bg" id="clanModal">
  <div class="rmodal-box" style="max-width:980px;width:min(96vw,980px)">
    <h2 style="color:#16a34a;margin-bottom:8px">Clan Hub</h2>
    <p id="clanStatus" style="color:#4a5568;margin-bottom:12px">Sign in to manage clans.</p>

    <div class="clan-subnav" id="clanSubnav">
      <button id="clanTabCreateJoin" onclick="showClanSubSection('createJoin')">Create / Join</button>
      <button id="clanTabMembers" onclick="showClanSubSection('members')">Members</button>
      <button id="clanTabChat" onclick="showClanSubSection('chat')">Chat</button>
      <button id="clanTabClash" onclick="showClanSubSection('clash')">Clash</button>
      <button id="clanTabLeaderboard" onclick="showClanSubSection('leaderboard')">Leaderboard</button>
      <button id="clanTabSettings" onclick="showClanSubSection('settings')">Settings</button>
    </div>

    <section id="clanSectionCreateJoin" class="clan-subsection">
      <div class="clan-card-grid">
        <div class="clan-card">
          <h4>Create Clan</h4>
          <input id="clanCreateName" placeholder="Clan name" maxlength="24" style="margin-bottom:8px" />
          <input id="clanCreateTag" placeholder="Tag (2-6)" maxlength="6" style="margin-bottom:8px" />
          <div style="display:flex;gap:8px;flex-wrap:wrap">
            <button id="clanCreateBtn" onclick="createClan()" style="width:auto;background:#16a34a">Create Clan</button>
            <button id="clanLeaveBtn" onclick="leaveClan()" style="width:auto;background:#dc2626">Leave Clan</button>
          </div>
        </div>
        <div class="clan-card">
          <h4>Join Clan</h4>
          <div style="display:flex;gap:8px;margin-bottom:8px">
            <input id="clanInviteJoinInput" placeholder="Invite code" maxlength="12" />
            <button id="clanJoinInviteBtn" onclick="joinClanByInvite()" style="width:auto;background:#0284c7">Join by Code</button>
          </div>
          <div style="font-size:12px;color:#64748b;margin-bottom:8px">Your clan invite code: <strong id="clanInviteCodeValue">-</strong> <button id="clanRegenInviteBtn" onclick="regenerateClanInviteCode()" style="width:auto;background:#0f766e;padding:4px 8px;font-size:11px">Regenerate</button></div>
          <div id="clanList" style="max-height:220px;overflow:auto;font-size:13px;color:#334155"></div>
        </div>
      </div>
    </section>

    <section id="clanSectionMembers" class="clan-subsection">
      <div class="clan-card">
        <h4>Your Clan Members</h4>
        <div id="clanMembers" style="max-height:320px;overflow:auto;font-size:13px;color:#334155">No clan joined.</div>
      </div>
    </section>

    <section id="clanSectionChat" class="clan-subsection">
      <div class="clan-card">
        <h4>Clan Chat</h4>
        <div id="clanChatList" style="max-height:260px;overflow:auto;border:1px solid #e2e8f0;background:white;border-radius:8px;padding:8px;font-size:12px"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <input id="clanChatInput" placeholder="Type message" maxlength="180" />
          <button onclick="sendClanMessage()" style="width:auto;background:#16a34a">Send</button>
        </div>
      </div>
    </section>

    <section id="clanSectionClash" class="clan-subsection">
      <div class="clan-card">
        <h4>Clan War Multiplayer</h4>
        <div style="font-size:12px;color:#64748b;margin-bottom:8px">Clan war uses auto matchmaking only (no manual direct challenge).</div>
        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-bottom:8px">
          <select id="clanClashMode" style="max-width:170px">
            <option value="t20i">T20I</option>
            <option value="odi">ODI</option>
            <option value="test">Test</option>
            <option value="rct">RCT</option>
            <option value="custom">Custom</option>
          </select>
          <input id="clanClashOvers" type="number" min="1" max="50" value="4" style="max-width:110px" />
        <div id="clanSquadPicker" style="margin:8px 0;padding:8px;border:1px solid #e2e8f0;border-radius:8px;background:#f8fafc"></div>
        </div>
        <button id="clanChallengeBtn" onclick="createClanChallenge()" style="display:none">Challenge Clan</button>
        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center;margin-top:8px">
          <button id="clanQueueJoinBtn" onclick="joinClanWarQueue()" style="width:auto;background:#16a34a">Find Clan War</button>
          <button id="clanQueueLeaveBtn" onclick="leaveClanWarQueue()" style="width:auto;background:#dc2626;display:none">Leave Queue</button>
          <span id="clanQueueStatus" style="font-size:12px;color:#475569">Queue idle.</span>
        </div>
        <div id="clanChallenges" style="margin-top:10px;max-height:240px;overflow:auto;font-size:13px;color:#475569"></div>
      </div>
    </section>

    <section id="clanSectionLeaderboard" class="clan-subsection">
      <div class="clan-card">
        <h4>Clan Leaderboard</h4>
        <div id="clanLeaderboard" style="max-height:320px;overflow:auto;font-size:13px;color:#334155"></div>
      </div>
    </section>

    <section id="clanSectionSettings" class="clan-subsection">
      <div id="clanSettingsMount"></div>
    </section>

    <div style="display:flex;justify-content:flex-end;margin-top:12px">
      <button onclick="closeClanModal()" style="width:auto;background:#64748b">Close</button>
    </div>
  </div>
</div>


<!-- Friends Modal -->
<div class="rmodal-bg" id="friendModal">
  <div class="rmodal-box" style="max-width:1040px;width:min(96vw,1040px)">
    <h2 style="color:#2563eb;margin-bottom:8px">Friends Hub</h2>
    <p id="friendStatus" style="color:#4a5568;margin-bottom:12px">Sign in to use friends, private chat, and friendly games.</p>

    <div class="clan-subnav" id="friendSubnav">
      <button id="friendTabDiscover" onclick="showFriendSubSection('discover')">Discover</button>
      <button id="friendTabRequests" onclick="showFriendSubSection('requests')">Requests</button>
      <button id="friendTabFriends" onclick="showFriendSubSection('friends')">Friends</button>
      <button id="friendTabChat" onclick="showFriendSubSection('chat')">Chat</button>
      <button id="friendTabFriendly" onclick="showFriendSubSection('friendly')">Friendly Match</button>
    </div>

    <section id="friendSectionDiscover" class="clan-subsection">
      <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;text-align:left">
        <h4 style="margin:0 0 8px;color:#1f2937">Find by Username</h4>
        <div style="display:flex;gap:8px;align-items:center;flex-wrap:wrap;margin-bottom:8px"><input id="friendSearchUsername" maxlength="16" placeholder="Enter username" style="max-width:220px" /><button onclick="searchPlayerByUsername()" style="width:auto;background:#0284c7">Search</button><button onclick="sendFriendRequestByUsername()" style="width:auto;background:#2563eb">Send Request</button></div>
        <div id="friendPlayerList" style="max-height:300px;overflow:auto;font-size:13px;color:#334155">Search a username to send request.</div>
      </div>
    </section>

    <section id="friendSectionRequests" class="clan-subsection">
      <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;text-align:left">
        <h4 style="margin:0 0 8px;color:#1f2937">Incoming Friend Requests</h4>
        <div id="friendIncomingList" style="max-height:300px;overflow:auto;font-size:13px;color:#334155"></div>
      </div>
    </section>

    <section id="friendSectionFriends" class="clan-subsection">
      <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;text-align:left">
        <h4 style="margin:0 0 8px;color:#1f2937">My Friends</h4>
        <div id="friendList" style="max-height:260px;overflow:auto;font-size:13px;color:#334155"></div>
      </div>
    </section>

    <section id="friendSectionChat" class="clan-subsection">
      <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;text-align:left">
        <h4 id="friendChatWith" style="margin:0 0 8px;color:#1f2937">Friend Chat</h4>
        <div id="friendChatMessages" style="max-height:260px;overflow:auto;border:1px solid #e2e8f0;background:white;border-radius:8px;padding:8px;font-size:12px"></div>
        <div style="display:flex;gap:8px;margin-top:8px">
          <input id="friendChatInput" placeholder="Type message" maxlength="220" />
          <button onclick="sendFriendMessage()" style="width:auto;background:#16a34a">Send</button>
        </div>
      </div>
    </section>

    <section id="friendSectionFriendly" class="clan-subsection">
      <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:10px;text-align:left">
        <h4 style="margin:10px 0 8px;color:#1f2937">Friendly Custom Game</h4>
        <div style="display:flex;gap:8px;flex-wrap:wrap;align-items:center">
          <select id="friendlyMode" style="max-width:180px">
            <option value="t20i">T20I (4 overs)</option>
            <option value="odi">ODI (10 overs)</option>
            <option value="test">Test (25 overs)</option>
            <option value="rct">RCT (15 overs)</option>
            <option value="custom">Custom</option>
          </select>
          <input id="friendlyOvers" type="number" min="1" max="50" value="4" style="max-width:110px" />
          <button onclick="sendFriendlyChallenge()" style="width:auto;background:#2563eb">Challenge Friend</button>
        </div>
        <div id="friendlyIncomingList" style="margin-top:10px;max-height:160px;overflow:auto;font-size:12px;color:#334155"></div>
      </div>
    </section>

    <div style="display:flex;justify-content:flex-end">
      <button onclick="closeFriendModal()" style="width:auto;background:#64748b">Close</button>
    </div>
  </div>
</div>
<!-- App Dialog Modal -->
<div class="rmodal-bg" id="appDialogModal">
  <div class="rmodal-box app-dialog-box">
    <h3 id="appDialogTitle" style="color:#2d3748;margin-bottom:10px">Notice</h3>
    <p id="appDialogMessage" style="color:#4a5568;margin-bottom:18px;line-height:1.6"></p>
    <div id="appDialogButtons" style="display:flex;gap:10px;justify-content:flex-end"></div>
  </div>
</div>
<div class="container">
  <!-- Welcome Section -->
  <div class="section" id="welcome-section" style="text-align:center;max-width:900px;margin:0 auto">
    <h1 style="font-size:3em;margin:30px 0;color:#667eea">ğŸ Hand Cricket</h1>
    <p style="font-size:1.3em;color:#666;margin-bottom:40px">The Ultimate Cricket Tournament Simulator</p>
    
    <div id="playerProfilePanel" style="display:none;background:white;padding:18px;border-radius:14px;margin:0 auto 24px auto;max-width:900px;box-shadow:0 6px 18px rgba(0,0,0,.1)">
      <h3 style="color:#2d3748;margin-bottom:12px">Player Progress</h3>
      <div style="display:grid;grid-template-columns:repeat(auto-fit,minmax(160px,1fr));gap:12px">
        <div style="background:#f7fafc;padding:12px;border-radius:10px">
          <div style="color:#718096;font-size:12px">Aura</div>
          <div id="playerAuraValue" style="font-size:26px;font-weight:800;color:#2d3748">0</div>
        </div>
        <div style="background:#f7fafc;padding:12px;border-radius:10px">
          <div style="color:#718096;font-size:12px">Rank Points (RP)</div>
          <div id="playerRPValue" style="font-size:26px;font-weight:800;color:#2d3748">0</div>
        </div>
        <div style="background:#f7fafc;padding:12px;border-radius:10px">
          <div style="color:#718096;font-size:12px">Rank Tier</div>
          <div id="playerTierValue" style="font-size:26px;font-weight:800;color:#2d3748">Bronze</div>
        </div>
        <div style="background:#f7fafc;padding:12px;border-radius:10px">
          <div style="color:#718096;font-size:12px">Match Tokens</div>
          <div id="playerTokensValue" style="font-size:26px;font-weight:800;color:#2d3748">5</div>
        </div>
      </div>
      <p style="color:#718096;font-size:12px;margin-top:10px">Multiplayer (next phase) will consume tokens per ranked match.</p>
    </div>
    
    <div style="background:linear-gradient(135deg,#667eea 0%,#764ba2 100%);color:white;padding:40px;border-radius:20px;margin:30px 0">
      <h2 style="color:white;margin-bottom:20px">?? Welcome to Hand Cricket!</h2>
      <p style="font-size:1.1em;line-height:1.8">Experience the thrill of international cricket tournaments. Choose your team, compete in multiple formats, and lead your nation to glory!</p>
    </div>
    
    <div style="display:grid;grid-template-columns:1fr 1fr;gap:20px;margin:30px 0;text-align:left">
      <div style="background:#f7fafc;padding:25px;border-radius:15px;border-left:5px solid #48bb78">
        <h3 style="color:#48bb78;margin-bottom:15px">?? How to Play</h3>
        <ul style="line-height:2;color:#4a5568">
          <li>Choose a number (0-6) to bat</li>
          <li>If you match AI's number = OUT!</li>
          <li>Otherwise, score that many runs</li>
          <li>Select bowlers strategically</li>
          <li>Win matches to advance</li>
        </ul>
      </div>
      <div style="background:#f7fafc;padding:25px;border-radius:15px;border-left:5px solid #f59e0b">
        <h3 style="color:#f59e0b;margin-bottom:15px">?? Tournament Formats</h3>
        <ul style="line-height:2;color:#4a5568">
          <li><strong>ODI World Cup:</strong> 10 overs</li>
          <li><strong>T20 World Cup:</strong> 4 overs</li>
          <li><strong>WTC:</strong> Test matches</li>
          <li><strong>IPL:</strong> 5 overs franchise</li>
        </ul>
      </div>
    </div>
    
    <div id="historySection" style="background:#edf2f7;padding:30px;border-radius:15px;margin:30px 0">
      <h3 style="color:#2d3748;margin-bottom:20px">ğŸ“œ Your Tournament History</h3>
      <div id="historyContent"><p style="font-style:italic;color:#718096">No tournaments won yet. Start playing!</p></div>
    </div>
    
    <div id="authSection" style="background:white;padding:30px;border-radius:15px;margin:30px 0;box-shadow:0 4px 12px rgba(0,0,0,0.1)">
      <div id="signedOutView">
        <h3 style="color:#2d3748;margin-bottom:15px">â˜ Save Your Progress</h3>
        <p style="color:#718096;margin-bottom:20px">Sign in with Google to save tournament progress to the cloud and join the global leaderboard!</p>
        <button onclick="signInWithGoogle()" style="background:white;color:#444;padding:12px 30px;border:2px solid #ddd;border-radius:5px;cursor:pointer;font-size:16px;display:inline-flex;align-items:center;gap:10px;box-shadow:0 2px 4px rgba(0,0,0,0.1);width:auto;text-transform:none">
          <img src="https://www.gstatic.com/firebasejs/ui/2.0.0/images/auth/google.svg" width="20" height="20" alt="G">Sign in with Google
        </button>
      </div>
      <div id="signedInView" style="display:none">
        <div style="display:flex;align-items:center;justify-content:space-between;flex-wrap:wrap;gap:15px">
          <div style="display:flex;align-items:center;gap:15px">
            <img id="userPhoto" src="" alt="User" style="width:50px;height:50px;border-radius:50%;border:2px solid #667eea">
            <div style="text-align:left">
              <p style="color:#2d3748;font-weight:bold;margin:0" id="userName">User Name</p>
                            <p style="color:#718096;font-size:14px;margin:5px 0 0 0" id="userEmail">email</p>
              <div style="display:flex;gap:8px;align-items:center;margin-top:8px;flex-wrap:wrap">
                <input id="usernameInput" maxlength="16" placeholder="Unique username (one-time)" style="max-width:180px;padding:7px 10px;border:1px solid #cbd5e1;border-radius:8px;font-size:13px" />
                <button id="usernameSaveBtn" onclick="saveUsername()" style="width:auto;background:#2563eb;padding:7px 12px;font-size:12px">Set Username</button>
              </div>
            </div>
          </div>
          <div style="display:flex;gap:10px">
            <button onclick="saveProgressToCloud()" style="padding:10px 20px;background:#48bb78;color:white;border:none;border-radius:5px;cursor:pointer;width:auto">?? Save</button>
            <button onclick="signOutUser()" style="padding:10px 20px;background:#718096;color:white;border:none;border-radius:5px;cursor:pointer;width:auto">Sign Out</button>
          </div>
        </div>
        <p id="lastSyncTime" style="color:#a0aec0;font-size:14px;margin-top:15px"></p>
      </div>
    </div>
    
    <button onclick="startHandCricket()" style="padding:20px 60px;font-size:1.5em;border-radius:50px;margin:20px 0;box-shadow:0 10px 30px rgba(102,126,234,0.4)">ğŸ® Try Hand Cricket</button>
    <br>
    <button id="resumeTournamentBtn" onclick="openResumeModal()" style="display:none;background:linear-gradient(135deg,#48bb78,#38a169);padding:15px 40px;font-size:1.2em;border-radius:50px;margin:10px 0 30px 0;box-shadow:0 6px 20px rgba(72,187,120,0.4)">â–¶ Resume Tournament</button>
    <p style="color:#a0aec0;margin-top:30px">Made with ğŸ for Cricket Fans | Version 3.5</p>
  </div>

  <h1 style="display:none" id="main-title">ğŸ Hand Cricket - Tournament Edition</h1>
  
  <!-- Celebration Overlays -->
  <div id="celebrationOverlay"><span id="celebrationText"></span></div>
  <div id="flagWinBackdrop"></div>
  <div id="matchOutcomeAnim"></div>
  <div id="rankGainAnim"></div>
  <div id="auraBurstAnim"></div>
  <div id="coinBankAnim"></div>
  <div id="trophyAnimation" class="trophy-animation">
    <div class="trophy">??</div>
    <h1 style="color:white;margin-top:20px" id="trophyText">CHAMPION!</h1>
    <button onclick="closeTrophy()" style="margin-top:30px;padding:15px 40px">Continue</button>
  </div>

  <!-- Setup Section -->
  <div class="section" id="setup-section" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center;margin-bottom:15px">
      <h2>âš™ï¸ Setup Match</h2>
      <button onclick="returnToHome()" style="width:auto;padding:8px 18px;background:#718096;font-size:13px">ğŸ  Home</button>
    </div>
    
    <h3>Select Mode</h3>
    <select id="matchMode" onchange="handleModeChange()">
      <option value="custom">Custom Match</option>
      <option value="t20i">T20I (4 overs)</option>
      <option value="odi">ODI (10 overs)</option>
      <option value="test">Test (25 overs/day, 5 days)</option>
      <option value="rct">RCT (15 overs)</option>
<option value="tournament">ğŸ† Tournament Mode</option>
    </select>
    
    <div id="customMatchSetup">
      <h3>Predefined Teams</h3>
      <select id="predefinedTeams" onchange="handleTeamSelection()">
        <option value="">--Select Team--</option>
      </select>
      <div id="teamFlagPreviewRow" style="display:flex;gap:12px;justify-content:center;align-items:center;margin:10px 0;flex-wrap:wrap">
        <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:8px 12px;font-size:13px">User Team: <span id="userTeamFlagPreview">-</span></div>
        <div style="background:#f8fafc;border:1px solid #e2e8f0;border-radius:8px;padding:8px 12px;font-size:13px">Opp Team: <span id="oppTeamFlagPreview">-</span></div>
      </div>
      <h3>Team Names</h3>
      <div class="team-inputs" style="display:grid;grid-template-columns:1fr 1fr;gap:10px;margin-bottom:15px">
        <input id="team1" placeholder="Your Team Name" maxlength="50"/>
        <input id="team2" placeholder="Computer Team Name" value="Computer" maxlength="50"/>
      </div>
      <label for="overs">Number of Overs</label>
      <input id="overs" type="number" min="1" max="50" value="2"/>
      <h3>Players (comma-separated)</h3>
      <textarea id="team1Players" rows="3" placeholder="Your players" maxlength="2000"></textarea>
      <textarea id="team2Players" rows="3" placeholder="Computer players" maxlength="2000"></textarea>
      <button id="openPlayerDraftBtn" type="button" onclick="togglePlayerDraftPanel()" style="background:linear-gradient(135deg,#0ea5e9,#2563eb)">Select XI from 22 (User Team)</button>
      <div id="playerDraftPanel" style="display:none;text-align:left;background:#f8fafc;border:1px solid #e2e8f0;border-radius:10px;padding:12px;margin:10px 0">
        <p style="font-size:13px;color:#475569;margin-bottom:8px">Pick exactly <strong>11</strong> players from squad of <strong>22</strong>.</p>
        <div id="playerDraftCount" style="font-size:12px;color:#64748b;margin-bottom:8px">Selected: 0/11</div>
        <div id="playerDraftList" style="display:grid;grid-template-columns:repeat(auto-fit,minmax(180px,1fr));gap:8px;max-height:220px;overflow:auto"></div>
        <div style="margin-top:10px;display:flex;gap:8px;flex-wrap:wrap">
          <button type="button" onclick="autoPickPlayingXI()" style="width:auto;background:#16a34a">Auto Pick XI</button>
          <button type="button" onclick="applySelectedXI()" style="width:auto;background:#2563eb">Apply XI</button>
        </div>
      </div>

      <button onclick="startGame()">ğŸš€ Start Match</button>
    </div>
    
    <div id="tournamentSetup" style="display:none">
      <h3>ğŸ† Select Tournament Format</h3>
      <select id="tournamentFormat" onchange="handleTournamentFormatChange()" style="margin:15px 0">
        <option value="">--Select Format--</option>
        <option value="odiWorldCup">ODI World Cup (10 overs)</option>
        <option value="t20WorldCup">T20 World Cup (4 overs)</option>
        <option value="wtc">WTC - World Test Championship (25 overs)</option>
        <option value="ipl">IPL (5 overs)</option>
      </select>
      <div id="tournamentFormatDetails" style="display:none">
        <p id="formatDescription" style="margin:15px 0;color:#666"></p>
        <h4>Your Team</h4>
        <select id="userTournamentTeam"><option value="">--Select Your Team--</option></select>
        <button onclick="startTournament()">ğŸ Start Tournament</button>
      </div>
    </div>
  </div>

  <!-- Tournament Section -->
  <div class="section" id="tournament-section" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:15px">
      <h2 id="tournamentTitle">ğŸ† ODI World Cup</h2>
      <button onclick="returnToHome()" style="width:auto;padding:8px 18px;background:#718096;font-size:13px">ğŸ  Home</button>
    </div>
    <div class="tournament-nav" id="tournamentNav">
      <button onclick="showTournamentStage('challengeLeague')">Challenge League</button>
      <button onclick="showTournamentStage('super6')">Super 6</button>
      <button onclick="showTournamentStage('qualifier')">Qualifier</button>
      <button onclick="showTournamentStage('worldCup')">World Cup</button>
      <button onclick="showStatsCorner()" style="background:#f59e0b">ğŸ“Š Stats</button>
    </div>
    <div id="statsCornerBtn" style="display:none;margin:10px 0">
      <button onclick="showStatsCorner()" style="width:100%;padding:12px;background:#f59e0b">ğŸ“Š Stats Corner</button>
    </div>
    <div id="tournamentContent"></div>
  </div>

  <!-- Game Section -->
  <div class="section" id="game-section" style="display:none">
    <div style="display:flex;justify-content:space-between;align-items:center;flex-wrap:wrap;gap:10px;margin-bottom:10px">
      <h2 id="matchTitle">Match</h2>
      <div style="display:flex;gap:8px">
        <button id="pauseMatchBtn" style="display:none;background:#f59e0b;width:auto;padding:8px 16px;font-size:13px" onclick="pauseMatch()">â¸ Pause</button>
        <button onclick="returnToHome()" style="width:auto;padding:8px 16px;background:#718096;font-size:13px">ğŸ  Home</button>
      </div>
    </div>
    
    <div class="stats-grid">
      <div class="stat-card"><div class="stat-label">Score</div><div class="stat-value" id="scoreDisplay">0/0</div></div>
      <div class="stat-card"><div class="stat-label">Overs</div><div class="stat-value" id="oversDisplay">0.0</div></div>
      <div class="stat-card"><div class="stat-label">Target</div><div class="stat-value" id="targetDisplay">-</div></div>
    </div>
    
    <h3 id="batsmenStatus"></h3>
    <div id="dayOversDisplay">Day 1 | Over 0.0</div>
    
    <label for="bowlerSelect">Select Bowler:</label>
    <select id="bowlerSelect" onchange="handleBowlerSelection()"></select>
    
    <div class="number-buttons">
      <button onclick="playBall(0)">0</button>
      <button onclick="playBall(1)">1</button>
      <button onclick="playBall(2)">2</button>
      <button onclick="playBall(3)">3</button>
      <button onclick="playBall(4)">4</button>
      <button onclick="playBall(5)">5</button>
      <button onclick="playBall(6)">6</button>
    </div>
    
    <button id="continueDayBtn" style="display:none" onclick="continueNextDay()">?? Continue Next Day</button>
    <button id="declareBtn" style="display:none;background:linear-gradient(135deg,#e53e3e,#c53030);color:white;border:none;padding:10px 28px;border-radius:50px;font-weight:700;font-size:14px;cursor:pointer;margin:6px 4px;box-shadow:0 4px 12px rgba(229,62,62,.4)" onclick="declareBattingInnings()">ğŸ³ï¸ Declare</button>
    
    <div id="ballLog"></div>
    <div id="bowlerStats"></div>
    <div id="log"></div>
    <div id="resultBox"></div>
  </div>
</div>

<!-- Your JavaScript Files (Load in order) -->
<script src="core engine.js"></script>
<script src="Game-state.js"></script>
<script src="tournament.js"></script>
<script src="clan.js"></script>
<script src="friend.js"></script>
<script src="Debug.js"></script>
</body>
</html>


























